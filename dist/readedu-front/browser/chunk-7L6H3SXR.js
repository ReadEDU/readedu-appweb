import{a as T,b as j,c as G,d as b,e as q,f as H,g as $,h as V,i as J,j as K,k as Q,l as W,m as X,n as Y,o as Z,p as ee,q as te,r as oe,s as ne,t as re,u as M,v as ie}from"./chunk-BLAVC3MG.js";import{a as L,f as R,g as v,h as z,k as A,m as x}from"./chunk-GR5SHKY7.js";import"./chunk-XAZLOLJU.js";import{$a as g,Ea as p,Ua as h,W as I,Xb as P,Ya as w,Za as D,a as U,aa as l,ab as n,bb as t,cb as s,ea as c,gb as d,sb as r,ub as F,vb as B,xb as m}from"./chunk-DIISZO6I.js";var _=class i{isSidebarActive=!1;toggleSidebar(){this.isSidebarActive=!this.isSidebarActive}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-reader-layout"]],standalone:!0,features:[m],decls:22,vars:2,consts:[[1,"layout-dashboard"],[1,"sidebar-toggle-btn",3,"click"],[1,"navbar-toggler-icon"],[1,"layout-sidebar"],["routerLink","/articles","routerLinkActive","active"],[1,"fas","fa-newspaper"],["routerLink","/donations","routerLinkActive","active"],[1,"fas","fa-heart"],["routerLink","/favorites","routerLinkActive","active"],[1,"fas","fa-star"],[1,"layout-content"]],template:function(e,a){e&1&&(s(0,"app-navbar"),n(1,"div",0)(2,"button",1),d("click",function(){return a.toggleSidebar()}),s(3,"span",2),t(),n(4,"div",3)(5,"nav")(6,"ul")(7,"li")(8,"a",4),s(9,"i",5),r(10," Art\xEDculos "),t()(),n(11,"li")(12,"a",6),s(13,"i",7),r(14," Donaciones "),t()(),n(15,"li")(16,"a",8),s(17,"i",9),r(18," Favoritos "),t()()()()(),n(19,"div",10),s(20,"router-outlet"),t()(),s(21,"app-footer")),e&2&&(p(4),D("collapsed",a.isSidebarActive))},dependencies:[P,T,j,R,z],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;background-color:#f4f4f4}.layout-dashboard[_ngcontent-%COMP%]{display:flex;height:100vh}app-navbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1050}.layout-sidebar[_ngcontent-%COMP%]{position:fixed;top:70px;left:0;bottom:0;width:250px;background-color:#62a355;color:#fff;transition:transform .3s ease-in-out;z-index:1040;overflow-y:auto}.layout-sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:10px 0;padding:10px 20px}.layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;display:flex;align-items:center;padding:10px;border-radius:4px;transition:background-color .3s}.layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .layout-sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#495057}.sidebar-toggle-btn[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:8px;cursor:pointer;z-index:1060;transition:background-color .3s ease,box-shadow .3s ease;display:flex;align-items:center;justify-content:center}.sidebar-toggle-btn[_ngcontent-%COMP%]:hover{background-color:#eaeaea;box-shadow:0 2px 6px #0003}.navbar-toggler-icon[_ngcontent-%COMP%]{display:block;width:24px;height:2px;background-color:#333;position:relative;transition:all .3s ease}.navbar-toggler-icon[_ngcontent-%COMP%]:before, .navbar-toggler-icon[_ngcontent-%COMP%]:after{content:"";display:block;width:24px;height:2px;background-color:#333;position:absolute;left:0;transition:all .3s ease}.navbar-toggler-icon[_ngcontent-%COMP%]:before{top:-6px}.navbar-toggler-icon[_ngcontent-%COMP%]:after{top:6px}.layout-content[_ngcontent-%COMP%]{flex-grow:1;padding:80px 20px;margin-left:250px;transition:margin-left .3s ease-in-out}.layout-sidebar.collapsed[_ngcontent-%COMP%] + .layout-content[_ngcontent-%COMP%]{margin-left:0}app-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:50px;background-color:#343a40;color:#fff;text-align:center;z-index:1050}']})};var u=class i{apiURL=`${A.apiURL}/user/profile`;http=l(L);getUserProfile(o){return this.http.get(`${this.apiURL}/${o}`)}updateUserProfile(o,e){return this.http.put(`${this.apiURL}/${o}`,e)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};function ae(i,o){i&1&&(n(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function le(i,o){i&1&&(n(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function pe(i,o){i&1&&(n(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function se(i,o){i&1&&(n(0,"mat-error"),r(1,"Introduzca un correo electr\xF3nico v\xE1lido"),t())}var O=class i{profileForm;profile;fb=l(K);userProfileService=l(u);authService=l(x);router=l(v);snackBar=l(M);constructor(){this.profileForm=this.fb.group({firstName:["",b.required],lastName:["",b.required],email:["",[b.required,b.email]],biography:[""]})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e?this.userProfileService.getUserProfile(e).subscribe({next:a=>{this.profile=a,this.profileForm.patchValue(a)},error:()=>{this.showSnackBar("Error al cargar el perfil del usuario.")}}):(this.showSnackBar("Usuario no autenticado."),this.router.navigate(["/auth/login"]))}controlHasError(o,e){return this.profileForm.controls[o].hasError(e)}onSubmit(){if(this.profileForm.valid){let o=U(U({},this.profile),this.profileForm.value);this.userProfileService.updateUserProfile(this.profile.id,o).subscribe({next:()=>{this.showSnackBar("Perfil actualizado exitosamente."),this.router.navigate(["/reader/profile"])},error:e=>{this.showSnackBar(e.error?.message||"Error al actualizar el perfil.")}})}}showSnackBar(o){this.snackBar.open(o,"Cerrar",{duration:3e3})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-update-profile"]],standalone:!0,features:[m],decls:28,vars:6,consts:[[1,"update-profile-container"],[1,"update-profile-card"],[1,"update-profile-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["matInput","","formControlName","firstName","placeholder","Ingrese su nombre"],["matInput","","formControlName","lastName","placeholder","Ingrese su apellido"],["matInput","","formControlName","email","type","email","placeholder","Ingrese su correo electr\xF3nico"],["matInput","","formControlName","biography","placeholder","Ingrese su biografia"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"]],template:function(e,a){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),r(4,"Actualizar Perfil"),t(),n(5,"form",3),d("ngSubmit",function(){return a.onSubmit()}),n(6,"mat-form-field",4)(7,"mat-label"),r(8,"Nombre"),t(),s(9,"input",5),h(10,ae,2,0,"mat-error"),t(),n(11,"mat-form-field",4)(12,"mat-label"),r(13,"Apellido"),t(),s(14,"input",6),h(15,le,2,0,"mat-error"),t(),n(16,"mat-form-field",4)(17,"mat-label"),r(18,"Correo Electr\xF3nico"),t(),s(19,"input",7),h(20,pe,2,0,"mat-error")(21,se,2,0,"mat-error"),t(),n(22,"mat-form-field",4)(23,"mat-label"),r(24,"Biografia"),t(),s(25,"input",8),t(),n(26,"button",9),r(27," Guardar Cambios "),t()()()()()),e&2&&(p(5),w("formGroup",a.profileForm),p(5),g(a.controlHasError("firstName","required")?10:-1),p(5),g(a.controlHasError("lastName","required")?15:-1),p(5),g(a.controlHasError("email","required")?20:-1),p(),g(a.controlHasError("email","email")?21:-1),p(5),w("disabled",a.profileForm.invalid))},dependencies:[re,ne,te,ee,Z,X,Y,oe,ie,Q,$,G,q,H,W,V,J],styles:[".update-profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;background-color:#f9f9f9}.update-profile-card[_ngcontent-%COMP%]{width:100%;max-width:600px;background-color:#fff;border-radius:12px;box-shadow:0 4px 8px #0000001a;padding:30px}.update-profile-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:24px;font-weight:700;margin-bottom:20px;border-bottom:2px solid #6cbf84;padding-bottom:10px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#2c3e50}.mat-input-element[_ngcontent-%COMP%]{color:#333}.mat-hint[_ngcontent-%COMP%], .mat-error[_ngcontent-%COMP%]{font-size:13px;color:#d9534f}.submit-button[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:10px 0;font-size:16px;font-weight:700;background-color:#6cbf84;color:#fff;border:none;border-radius:5px;transition:background-color .3s ease;cursor:pointer}.submit-button[_ngcontent-%COMP%]:hover{background-color:#5ba873}@media (max-width: 600px){.update-profile-card[_ngcontent-%COMP%]{padding:20px}.update-profile-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}}"]})};var y=class i{profile;userProfileService=l(u);authService=l(x);router=l(v);snackBar=l(M);ngOnInit(){this.loadUserProfile()}loadUserProfile(){let e=this.authService.getUser()?.id;e?this.userProfileService.getUserProfile(e).subscribe({next:a=>{this.profile=a,this.showSnackBar("Perfil cargado con \xE9xito")},error:a=>{this.showSnackBar("Error al cargar el perfil")}}):(this.showSnackBar("Usuario no autenticado"),this.router.navigate(["/auth/login"]))}navigateToUpdateProfile(){this.router.navigate(["/reader/profile/update"])}showSnackBar(o){this.snackBar.open(o,"Cerrar",{duration:3e3})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-user-profile"]],standalone:!0,features:[m],decls:17,vars:4,consts:[[1,"container"],[1,"update-button",3,"click"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h2"),r(2,"Perfil de Usuario"),t(),n(3,"p")(4,"strong"),r(5,"Nombre:"),t(),r(6),t(),n(7,"p")(8,"strong"),r(9,"Email:"),t(),r(10),t(),n(11,"p")(12,"strong"),r(13,"Biografia:"),t(),r(14),t(),n(15,"button",1),d("click",function(){return a.navigateToUpdateProfile()}),r(16," Actualizar Perfil "),t()()),e&2&&(p(6),B(" ",a.profile.firstName," ",a.profile.lastName,""),p(4),F(" ",a.profile.email,""),p(4),F(" ",a.profile.biography,""))},dependencies:[P],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:40px auto;padding:30px;border:1px solid #e0e0e0;border-radius:10px;background-color:#fff;box-shadow:0 6px 12px #0000001a}h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:28px;font-weight:700;border-bottom:3px solid #3498db;padding-bottom:12px;margin-bottom:25px}p[_ngcontent-%COMP%]{margin:15px 0;font-size:18px;line-height:1.8;color:#4a4a4a}strong[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.update-button[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;padding:10px 20px;background-color:#6cbf84;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s ease}.update-button[_ngcontent-%COMP%]:hover{background-color:#158467}"]})};var S=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-collection"]],standalone:!0,features:[m],decls:2,vars:0,template:function(e,a){e&1&&(n(0,"p"),r(1,"collection works!"),t())}})};var k=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-purchases"]],standalone:!0,features:[m],decls:2,vars:0,template:function(e,a){e&1&&(n(0,"p"),r(1,"purchases works!"),t())}})};var E=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-catalog"]],standalone:!0,features:[m],decls:2,vars:0,template:function(e,a){e&1&&(n(0,"p"),r(1,"catalog works!"),t())}})};var nt=[{path:"",component:_,children:[{path:"catalog",component:E},{path:"purchases",component:k},{path:"collection",component:S},{path:"profile",component:y},{path:"profile/update",component:O}]}];export{nt as readerRoutes};
